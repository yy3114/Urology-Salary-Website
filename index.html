<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全球泌尿科醫師薪水與人均GNI比較</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-gradient-start: #e0eafc;
            --bg-gradient-end: #cfdef3;
            --container-bg: rgba(255, 255, 255, 0.85);
            --primary-text: #1a202c;
            --secondary-text: #4a5568;
            --accent-color-1: #10b981; /* Emerald */
            --accent-color-2: #34d399; /* Green */
            --secondary-color-1: #f97316; /* Orange */
            --secondary-color-2: #fb923c; /* Light Orange */
            --border-color: #e2e8f0;
            --shadow-color: rgba(100, 116, 139, 0.2);
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-image: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
            color: var(--primary-text);
            line-height: 1.7;
        }

        .container {
            max-width: 1200px;
            margin: 2.5rem auto;
            padding: 2.5rem;
            background-color: var(--container-bg);
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px var(--shadow-color);
            border: 1px solid rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(8px);
        }

        h1 {
            color: var(--primary-text);
            text-align: center;
            border: none;
            border-radius: 16px;
            padding: 1.5rem;
            max-width: 900px;
            margin: 0 auto 2.5rem auto;
            background-color: rgba(255, 255, 255, 0.5);
            box-shadow: 0 8px 16px -4px var(--shadow-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
        }
        
        .main-title {
            font-weight: 700;
            font-size: 2.8rem;
            line-height: 1.25;
        }

        .title-note {
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--secondary-text);
        }
        
        .subtitle {
            text-align: left;
            color: var(--secondary-text);
            max-width: 100%;
            margin: 0 0 2.5rem 0;
            font-size: 1.1rem;
            padding-left: 1rem;
            border-left: 4px solid var(--border-color);
        }
        
        .currency-note {
            display: block;
            margin-top: 0.75rem;
            font-weight: 500;
            color: var(--primary-text);
        }

        .chart-container {
            width: 100%;
            overflow-x: auto;
        }
        
        .bar-urologist-salary, .bar-national-income {
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        .country-group:hover .bar-urologist-salary,
        .country-group:hover .bar-national-income {
            transform: scale(1.01, 1.08);
            filter: brightness(1.1);
        }
        
        .axis path, .axis .domain { display: none; }
        .axis line { stroke: var(--border-color); }
        .axis text {
            fill: var(--secondary-text);
            font-size: 1rem; 
        }
        .grid-line line {
            stroke-dasharray: 2,3;
            stroke: var(--border-color);
        }
        .grid-line path { stroke-width: 0; }

        .country-label-text {
            font-weight: 700;
            fill: var(--primary-text);
            font-size: 1.4rem; 
            text-anchor: end;
        }
        
        .value-label {
            fill: rgba(255, 255, 255, 0.9);
            font-size: 0.95rem;
            font-weight: 700;
            pointer-events: none;
            text-anchor: end;
            opacity: 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .chart-title-bottom {
            font-weight: 500;
            font-size: 1.1rem;
            fill: var(--secondary-text);
            text-anchor: middle;
        }
        
        .tooltip {
            position: absolute;
            text-align: left;
            padding: 0.75rem 1rem;
            background: var(--container-bg);
            color: var(--primary-text);
            border-radius: 8px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s, transform 0.2s;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 1px solid var(--border-color);
            transform: translateY(10px);
            backdrop-filter: blur(5px);
        }
        .tooltip strong { color: var(--accent-color-1); }
        
        .country-detail-display {
            margin-top: 2.5rem;
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap: 1.5rem;
            min-height: 180px;
        }
        
        .detail-box {
            flex: 1;
            max-width: 400px;
            padding: 1.5rem;
            border-radius: 16px;
            border: none;
            background-color: rgba(255, 255, 255, 0.7);
            box-shadow: 0 8px 16px -4px var(--shadow-color);
            display: flex;
            align-items: center;
            gap: 1rem;
            opacity: 0;
            transform: translateY(20px);
            animation-fill-mode: forwards;
        }
        .detail-box-urologist { border-bottom: 5px solid var(--accent-color-2); }
        .detail-box-income { border-bottom: 5px solid var(--secondary-color-2); }
        
        .detail-box-icon {
            flex-shrink: 0;
            width: 50px;
            height: 50px;
        }
        .detail-box-text .label {
            font-size: 1rem;
            font-weight: 500;
            color: var(--secondary-text);
            margin-bottom: 0;
        }
        .detail-box-text .value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-text);
            line-height: 1.2;
        }
        
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .legend {
            display: flex;
            justify-content: center;
            margin-bottom: 2.5rem;
            font-size: 1.1rem;
            gap: 2.5rem;
        }
        .legend-item { display: flex; align-items: center; }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 0.75rem;
        }

        .notes {
            margin-top: 2.5rem;
            padding: 1.25rem;
            background-color: rgba(255, 255, 255, 0.4);
            border-radius: 16px;
            font-size: 0.95rem; 
            color: var(--secondary-text);
        }
        .notes ul {
            list-style-position: inside;
            padding-left: 0.5rem;
        }
        .country-group { cursor: pointer; }

        @media (max-width: 768px) {
            h1 { padding: 1rem; gap: 0.1rem; }
            .main-title { font-size: 2rem; }
            .title-note { font-size: 1rem; }
            .subtitle { font-size: 1rem; padding-left: 0.75rem;}
            .country-label-text { font-size: 1.2rem; }
            .country-detail-display { flex-direction: column; }
            .detail-box-text .value { font-size: 1.6rem; }
            .axis text { font-size: 0.9rem; }
        }

    </style>
</head>
<body class="p-4">
    <div class="container">
        <h1>
            <span class="main-title">全球泌尿科醫師<br>薪資洞察</span>
            <span class="title-note">（僅供參考，個別差異極大。）</span>
        </h1>
        <p class="subtitle">
            此圖表比較主要國家泌尿科醫師的平均年薪與人均國民總收入(GNI)。
            <br>
            <strong>點擊任一國家長條圖</strong>，即可在下方查看詳細數據。
            <strong class="currency-note">所有數值均為美元(USD)年薪估計值 (資料年份約 2022-2024)。</strong>
        </p>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(45deg, var(--secondary-color-1), var(--secondary-color-2));"></div>
                人均國民總收入 (GNI)
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(45deg, var(--accent-color-1), var(--accent-color-2));"></div>
                泌尿科醫師薪水
            </div>
        </div>

        <div class="chart-container">
            <div id="chart"></div>
        </div>

        <div id="countryDetail" class="country-detail-display">
             <p style="text-align: center; color: var(--secondary-text); margin: auto;">點擊上方圖表中的任一國家以顯示詳細資訊。</p>
        </div>

        <div class="notes">
            <p><strong>重要提示：</strong></p>
            <ul>
                <!-- MODIFICATION: Clarified the wording for data years -->
                <li>資料年份：GNI 數據主要參考世界銀行(World Bank)發布之 2022-2023 年資料；醫師薪資為綜合多方來源、反映 2023-2024 年水平的估計值。</li>
                <li>薪資結構差異：市場導向國家(如美國)的稅前薪資較高，但醫師需負擔高額學貸及執業保險；公醫制度國家(如多數歐盟國)的稅前薪資可能較低，但通常伴隨較低的教育成本與完善的社會福利。</li>
                <li>醫師實際薪資會受年資、執業地點、自費項目多寡、醫療體系、工時與生活成本等多元因素影響。</li>
            </ul>
        </div>
    </div>

    <script>
        const data = [
            { country: "摩納哥", national_income: 234317, urologist_salary: 420000 },
            { country: "美國", national_income: 76770, urologist_salary: 400000 },
            { country: "阿拉伯聯合大公國", national_income: 50460, urologist_salary: 350000 },
            { country: "澳洲", national_income: 65110, urologist_salary: 320000 },
            { country: "加拿大", national_income: 54930, urologist_salary: 300000 },
            { country: "日本", national_income: 45450, urologist_salary: 250000 },
            { country: "新加坡", national_income: 67200, urologist_salary: 220000 },
            { country: "德國", national_income: 55020, urologist_salary: 200000 },
            { country: "法國", national_income: 44410, urologist_salary: 170000 },
            { country: "英國", national_income: 49240, urologist_salary: 150000 },
            { country: "西班牙", national_income: 31220, urologist_salary: 140000 },
            { country: "台灣", national_income: 33560, urologist_salary: 120000 },
            { country: "冰島", national_income: 72770, urologist_salary: 120000 },
            { country: "韓國", national_income: 36190, urologist_salary: 100000 },
            { country: "瑞典", national_income: 60920, urologist_salary: 100000 },
            { country: "南非", national_income: 6270, urologist_salary: 95000 },
            { country: "捷克", national_income: 26020, urologist_salary: 80000 },
            { country: "俄羅斯", national_income: 14270, urologist_salary: 75000 },
            { country: "土耳其", national_income: 10610, urologist_salary: 60000 },
            { country: "馬來西亞", national_income: 12020, urologist_salary: 55000 },
            { country: "墨西哥", national_income: 10560, urologist_salary: 50000 },
            { country: "哈薩克", national_income: 9620, urologist_salary: 45000 },
            { country: "阿根廷", national_income: 11590, urologist_salary: 35000 },
            { country: "泰國", national_income: 7260, urologist_salary: 30000 },
            { country: "越南", national_income: 4160, urologist_salary: 20000 }
        ];

        data.sort((a, b) => b.urologist_salary - a.urologist_salary);

        const margin = { top: 20, right: 30, bottom: 60, left: 180 }; 
        const width = 960 - margin.left - margin.right;
        const barHeight = 35;
        const groupPadding = 35;
        const height = data.length * (barHeight * 2 + groupPadding);

        const svg = d3.select("#chart").append("svg").attr("viewBox", `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`).append("g").attr("transform", `translate(${margin.left},${margin.top})`);
        const defs = svg.append("defs");
        const urologistGradient = defs.append("linearGradient").attr("id", "gradUrologist").attr("x1", "0%").attr("y1", "0%").attr("x2", "100%").attr("y2", "100%");
        urologistGradient.append("stop").attr("offset", "0%").style("stop-color", "var(--accent-color-2)");
        urologistGradient.append("stop").attr("offset", "100%").style("stop-color", "var(--accent-color-1)");
        const incomeGradient = defs.append("linearGradient").attr("id", "gradIncome").attr("x1", "0%").attr("y1", "0%").attr("x2", "100%").attr("y2", "100%");
        incomeGradient.append("stop").attr("offset", "0%").style("stop-color", "var(--secondary-color-2)");
        incomeGradient.append("stop").attr("offset", "100%").style("stop-color", "var(--secondary-color-1)");

        const tooltip = d3.select("body").append("div").attr("class", "tooltip");
        const maxVal = d3.max(data, d => Math.max(d.urologist_salary, d.national_income));
        const xScale = d3.scaleLinear().domain([0, maxVal * 1.05]).range([0, width]);
        const yScale = d3.scaleBand().domain(data.map(d => d.country)).range([0, height]).paddingInner(0.4).paddingOuter(0.2);
        
        svg.append("g").attr("class", "grid-line").call(d3.axisBottom(xScale).tickSize(-height).tickFormat(""));
        svg.append("g").attr("transform", `translate(0, ${height})`).attr("class", "axis").call(d3.axisBottom(xScale).ticks(5).tickFormat(d => `$${d / 1000}K`));
        svg.append("text").attr("class", "chart-title-bottom").attr("x", width / 2).attr("y", height + margin.bottom - 15).text("年收入 (美元)");

        const countryGroup = svg.selectAll(".country-group").data(data).enter().append("g").attr("class", "country-group").attr("transform", d => `translate(0, ${yScale(d.country)})`).style("cursor", "pointer").on("click", (event, d) => displayCountryDetails(d)).on("mouseover", function(event, d) {
                tooltip.transition().duration(200).style("opacity", 1).style("transform", "translateY(0)");
                tooltip.html(`<strong>${d.country}</strong><br>醫師年薪: $${d.urologist_salary.toLocaleString()}<br>人均GNI: $${d.national_income.toLocaleString()}`).style("left", (event.pageX + 15) + "px").style("top", (event.pageY - 28) + "px");
            }).on("mouseout", function() {
                tooltip.transition().duration(200).style("opacity", 0).style("transform", "translateY(10px)");
            });

        const barSubgroupHeight = yScale.bandwidth() / 2;

        countryGroup.append("rect").attr("class", "bar-national-income").attr("y", barSubgroupHeight).attr("height", barSubgroupHeight).attr("rx", 5).attr("ry", 5).style("fill", "url(#gradIncome)").attr("width", 0).transition().duration(1000).ease(d3.easeCubicInOut).delay((d, i) => i * 50).attr("width", d => xScale(d.national_income));
        countryGroup.append("rect").attr("class", "bar-urologist-salary").attr("y", 0).attr("height", barSubgroupHeight).attr("rx", 5).attr("ry", 5).style("fill", "url(#gradUrologist)").attr("width", 0).transition().duration(1000).ease(d3.easeCubicInOut).delay((d, i) => i * 50 + 50).attr("width", d => xScale(d.urologist_salary)).on("end", function() { d3.select(this.parentNode).selectAll(".value-label").transition().duration(300).style("opacity", 1); });
        
        const labelPadding = 10;
        
        countryGroup.append("text").attr("class", "value-label").attr("x", d => xScale(d.national_income) - labelPadding).attr("y", barSubgroupHeight * 1.5).attr("dy", "0.35em").text(d => { return xScale(d.national_income) > 50 ? `$${(d.national_income / 1000).toFixed(0)}K` : ""; });
        countryGroup.append("text").attr("class", "value-label").attr("x", d => xScale(d.urologist_salary) - labelPadding).attr("y", barSubgroupHeight * 0.5).attr("dy", "0.35em").text(d => `$${(d.urologist_salary / 1000).toFixed(0)}K`);
        countryGroup.append("text").attr("class", "country-label-text").attr("x", -15).attr("y", yScale.bandwidth() / 2).attr("dy", "0.35em").text(d => d.country);

        function displayCountryDetails(d) {
            const detailDiv = d3.select("#countryDetail");
            const salaryRatio = d.national_income > 0 ? (d.urologist_salary / d.national_income).toFixed(1) : "N/A";

            detailDiv.html(`
                <div class="detail-box detail-box-urologist" style="animation: fadeIn 0.5s ease-out 0.1s forwards;">
                    <div class="detail-box-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="var(--accent-color-1)" class="w-full h-full"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" /></svg>
                    </div>
                    <div class="detail-box-text">
                        <div class="label">醫師年薪 (${d.country}) | 約為GNI <strong>${salaryRatio}</strong> 倍</div>
                        <div class="value">$${d.urologist_salary.toLocaleString()}</div>
                    </div>
                </div>
                <div class="detail-box detail-box-income" style="animation: fadeIn 0.5s ease-out 0.2s forwards;">
                    <div class="detail-box-icon">
                         <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="var(--secondary-color-1)" class="w-full h-full"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.5-2.962A3.75 3.75 0 019 12a3.75 3.75 0 01-2.25-6.962M15 12a3.75 3.75 0 01-2.25 3.75M9 12a3.75 3.75 0 012.25-3.75M15 12a3.75 3.75 0 01-2.25 3.75M3 13.5a3 3 0 116 0v6a3 3 0 11-6 0v-6z" /></svg>
                    </div>
                     <div class="detail-box-text">
                        <div class="label">人均國民總收入 (GNI)</div>
                        <div class="value">$${d.national_income.toLocaleString()}</div>
                    </div>
                </div>
            `);
        }
    </script>
</body>
</html>
